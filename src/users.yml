signUp:
  handler: src/handler/signUp.handler
  description: 'Register a new user'
  name: ${file(resources/index.json):signup-users}
  timeout: 25
  logRetentionInDays: 14
  iamRoleStatementsInherit: true
  iamRoleStatementsName: ${file(resources/index.json):signup-users}
  iamRoleStatements: ${file(resources/iamRoleStatements/signUp.yml)}
  provisionedConcurrency: ${self:custom.provisionedConcurrency.${self:provider.stage}, 0}
  environment:
    USERS_VERIFICATION_URL: ${self:custom.config.users_verification_domain}
    USERS_TABLE: ${file(resources/index.json):users_table_name}
    USERS_CACHE_TABLE: ${file(resources/index.json):users_cache_table_name}
    SYSTEM_EMAIL: ${self:custom.config.systemEmail}
  events:
    - httpApi:
        path: /users/signup
        method: post
        cors: true